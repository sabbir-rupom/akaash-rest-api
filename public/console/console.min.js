var apiItems={},apiUrl="http://"+window.location.hostname,pathExt="/",tokenHeader="X-AUTH-TOKEN",jwtAuth="";
$(function(){$("input[name=baseUrl]").val(apiUrl+pathExt);$.getJSON(apiUrl+"/console/api-list.json?v="+ +Date.now(),function(a){var c=0;$.each(a,function(b,f){"groups"==b&&$.each(f,function(d,b){d=b.contents;var e="apiCollapse_"+c;b='<div class="card"><div class="card-header">'+('<a class="card-link" data-toggle="collapse" href="#'+e+'">')+b.name;b=b+"</a></div>"+('<div id="'+e+'" class="collapse" data-parent="#apiExample">')+('<ul class="list-group list-group-'+c+' list-group-flush">');$.each(d,
function(b,d){apiItems[d]={k:c,obj:a[d]}});b+="</ul></div></div>";$("#apiExample").append(b);c++})})});var a=setInterval(function(){$.isEmptyObject(apiItems)||($.each(apiItems,function(a,b){a='<li class="list-group-item" onclick="callApi(\''+a+"')\">"+b.obj.title+"</li>";$(".list-group-"+b.k).append(a)}),clearInterval(a))},1E3);$("#submit").on("click",function(){$("#jsonOutput").html("");var a=$("input[name=baseUrl]").val()+$("input[name=apiPath]").val(),b=$("input[name=queryParams]").val(),e=jwtAuth,
f=$("input:radio[name=method]:checked").val();$.ajax({type:f,url:a+(0<b.length?"?"+b:""),data:$("#apiForm form").serialize(),crossDomain:!0,xhrFields:{withCredentials:!0},async:!1,beforeSend:function(a){""!==e&&"undefined"===typeof e||a.setRequestHeader(tokenHeader,e)},success:function(b,c,e){if(b.hasOwnProperty("data")){var d=b.data;d.hasOwnProperty("user_id")&&d.hasOwnProperty("user_level")&&($("input[name=userId]").val(d.user_id),$("input[name=userLevel]").val(d.user_level))}a.includes("login")&&
(d=getResponseHeaders(e),"undefined"!==typeof d[tokenHeader]&&($("textarea[name=authorization]").val(d[tokenHeader]),jwtAuth=d[tokenHeader]));"success"==c?$("#jsonOutput").css("background-color","rgb(177, 255, 188)"):$("#jsonOutput").css("background-color","rgb(251, 205, 183)");b=JSON.stringify(b,null,2);$("#jsonOutput").text(syntaxHighlight(b));$("#responseHeader").html(e.getAllResponseHeaders().replace(/\n/g,"<br/>"))}}).fail(function(a){a.hasOwnProperty("responseJSON")?a=a.responseJSON:a.hasOwnProperty("responseText")&&
(a=a.responseText);a=JSON.stringify(a,null,2);$("#jsonOutput").css("background-color","rgb(251, 205, 183)");$("#jsonOutput").text(syntaxHighlight(a))})});$("input[name='server_type']").change(function(){if($(this).is(":checked")){let a=$(this).val();$("input[name=baseUrl]").val(a)}})});
function callApi(a){console.clear();if(apiItems.hasOwnProperty(a)){$("#apiForm form").html("");$('input[name="method"]').prop("checked",!1);a=apiItems[a];var c=a.obj.action;-1!==c.indexOf("login")&&$("textarea[name=authorization], input[name=userLevel], input[name=userId]").val("");$("input[name=apiPath]").val(c);$("input[name=method][value="+a.obj.method+"]").prop("checked",!0);$("input[name=queryParams]").val(a.obj.query);if(""!==a.obj.params&&(a=a.obj.params.split(","),$.isArray(a))){let b='<div class="form-group row">';
for(c=0;c<a.length;c++)0==c%2&&0!=c&&(b+='</div><div class="form-group row">'),b+='<label class="col-sm-2 col-form-label">'+ucFirst(a[c])+"</label>",b+='<div class="col-sm-4">',b+='<input type="text" class="form-control" name="'+a[c]+'">',b+="</div>";$(b).appendTo("#apiForm form")}$("#submit").removeAttr("disabled")}$("#jsonOutput").css("background-color","#DDD")}function isJson(a){try{JSON.parse(a)}catch(c){return!1}return!0}
function syntaxHighlight(a){"string"!==typeof a&&(a=JSON.stringify(a,void 0,2));return a}function ucFirst(a){return a.charAt(0).toUpperCase()+a.slice(1)}function getResponseHeaders(a){let c={};a=a.getAllResponseHeaders();let b="";a=a.split("\n");a.forEach(function(a){a=a.split(": ");b=a[1];a=a.shift();0!==a.length&&(a=a.toLowerCase(),c[a]=b.replace(/(\r\n|\n|\r)/gm,""))});return c};